SML.di("./DAgRafdt.js",import.meta.url,"DAgRafdt");SML.di("./DSWSCRFk.js",import.meta.url,"DSWSCRFk");SML.di("./DOyzSNfA.js",import.meta.url,"DOyzSNfA");SML.di("./mLeBs957.js",import.meta.url,"mLeBs957");SML.di("./DDc9KuQK.js",import.meta.url,"DDc9KuQK");SML.di("./OAEZpqSu.js",import.meta.url,"OAEZpqSu");SML.di("./Bx9dp7xe.js",import.meta.url,"Bx9dp7xe");SML.di("./BQbyLE0C.js",import.meta.url,"BQbyLE0C");SML.di("./BjRhnMPP.js",import.meta.url,"BjRhnMPP");SML.di("./B_Z23SiP.js",import.meta.url,"B_Z23SiP");SML.di("./B8bCssFV.js",import.meta.url,"B8bCssFV");SML.di("./BaPgoYnS.js",import.meta.url,"BaPgoYnS");SML.di("./DvsbXjsy.js",import.meta.url,"DvsbXjsy");
SML.dm("BOGiwmIN",["DAgRafdt","DSWSCRFk","DOyzSNfA","mLeBs957","DDc9KuQK","OAEZpqSu","Bx9dp7xe","BQbyLE0C","BjRhnMPP","B_Z23SiP","B8bCssFV","BaPgoYnS","DvsbXjsy"],(async(e,a,i,t,s,r)=>{const n=a.s;let l=window.location,o=class extends n{constructor(){super(...arguments),this.visibility=e.eQ.Public,this.subredditIds="",this.isCreateMode=!1,this.isCopyMode=!1,this.displayNameInput=e.C(),this.descriptionInput=e.C(),this.visibilityInput=e.C(),this.isPrivate=!1,this.showOnProfile=!1,this._events=new e.E(this),this.handleResponse=this._events.define("faceplate-response",(async a=>{(await a.detail.response.clone().text()).includes("faceplate-alert")||(this.fireCloseDialogEvent(),e.p(e.T.CustomFeedUpdated,{label:this.label??"",name:this.displayNameInput.value?.value??"",visibility:this.visibilityInput.value?.value,descriptionMd:this.descriptionInput.value?.value}),e.bT(this,{message:"Custom feed description updated"}))})),this.handleSubmit=this._events.define("faceplate-request",(async a=>{if(this.isCreateMode||this.isCopyMode){a.preventDefault();try{const i=a.detail.request.body,t=i?.get("subredditIds")?.toString().split(",").filter((e=>e.startsWith("t5_")))||[],{data:{createMultireddit:s}}=await e.r({operation:e.O.CustomFeedCreate,variables:{input:{displayName:i?.get("displayName")?.toString()??"",descriptionMd:i?.get("descriptionMd")?.toString()??"",visibility:i?.get("visibility")?.toString()??e.eQ.Public,subredditIds:t}}});if(s){const{ok:a,multireddit:i}=s;if(a&&i?.path){e.p(e.T.CustomFeedCreated),e.a(this,this.isCopyMode?r.bK(i.path):r.bL(i.path));const a=new URL(l.href);return a.pathname=i.path,void(l.href=a.href)}}throw new Error("error creating custom feed")}catch(a){const i=this.isCopyMode?"Failed to copy custom feed":"Failed to create custom feed";this.dispatchEvent(e.c("faceplate-alert",{level:e.I.error,cause:"uncategorized",message:i}))}}}))}firstUpdated(){this.isPrivate="PRIVATE"===this.visibility,this.showOnProfile="PUBLIC"===this.visibility,this.isCreateMode||this.isCopyMode||this._events.define("faceplate-alert",(e=>{e.detail.message="Failed to save custom feed"}))}willUpdate(a){if(this.hasUpdated){const i=a.has("isPrivate"),t=a.has("showOnProfile");(i||t)&&(this.visibility=i?this.isPrivate?e.eQ.Private:e.eQ.Public:this.showOnProfile?e.eQ.Public:e.eQ.Hidden,i&&(this.showOnProfile=this.visibility===e.eQ.Public))}}fireCloseDialogEvent(){this.dispatchEvent(new CustomEvent("close-dialog",{composed:!0,bubbles:!0}))}handleCancelClick(){this.fireCloseDialogEvent()}renderForm(){return a.x` <faceplate-form action="/svc/shreddit/custom-feed-update-details/" method="POST" target="custom-feed-description" partial-mode="${e.P.Replace}"> <input type="hidden" name="visibility" ${e.H(this.visibilityInput)} value="${this.visibility}"> <input type="hidden" name="label" value="${this.label}"> <input type="hidden" name="subredditIds" value="${this.subredditIds}"> <div class="flex flex-col gap-sm pt-sm"> <faceplate-text-input appearance="${i.T.SECONDARY}" name="displayName" ${e.H(this.displayNameInput)} required value="${this.displayName}" maxlength="${50}" character-count> <span slot="label">${"Name"}</span> </faceplate-text-input> <faceplate-textarea-input appearance="${t.a.SECONDARY}" class="relative w-full" name="descriptionMd" ${e.H(this.descriptionInput)} value="${this.description}" maxlength="${500}" character-count> <span slot="label">${"Description"}</span> </faceplate-textarea-input> ${s.l({onClick:()=>this.isPrivate=!this.isPrivate,label:"Make private",attributes:{role:"menuitemcheckbox",className:"group"},size:s.L.Medium,trailingSlot:a.x` <faceplate-switch-input name="" data-testid="private-toggle" ?checked="${this.isPrivate}"> </faceplate-switch-input> `,description:"Only viewable by you"})} ${s.l({onClick:()=>{this.isPrivate||(this.showOnProfile=!this.showOnProfile)},label:"Show on profile",attributes:{role:"menuitemcheckbox"},size:s.L.Medium,trailingSlot:a.x` <faceplate-switch-input name="" data-testid="show-on-profile-toggle" ?checked="${this.showOnProfile}" ?disabled="${this.isPrivate}"> </faceplate-switch-input> `,description:"Display this feed on your profile so others can find it"})} <div class="flex justify-end gap-xs"> ${e.J({appearance:"secondary",size:e.a2.Small,children:"Cancel",attributes:{type:"button",onclick:this.handleCancelClick}})} ${e.J({appearance:"primary",size:e.a2.Small,children:"Submit",attributes:{type:"submit"}})} </div> </div> </faceplate-form> `;}render(){return this.renderForm()}};o.styles=[e.t],a._([a.n({type:String})],o.prototype,"label",void 0),a._([a.n({type:String,attribute:"display-name"})],o.prototype,"displayName",void 0),a._([a.n({type:String})],o.prototype,"description",void 0),a._([a.n({type:String,reflect:!0})],o.prototype,"visibility",void 0),a._([a.n({type:String,attribute:"subreddit-ids"})],o.prototype,"subredditIds",void 0),a._([a.n({type:Boolean,attribute:"create"})],o.prototype,"isCreateMode",void 0),a._([a.n({type:Boolean,attribute:"copy"})],o.prototype,"isCopyMode",void 0),a._([a.b()],o.prototype,"isPrivate",void 0),a._([a.b()],o.prototype,"showOnProfile",void 0),o=a._([a.c("custom-feed-details-form")],o)}));