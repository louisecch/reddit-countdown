SML.di("./DSWSCRFk.js",import.meta.url,"DSWSCRFk");SML.di("./DAgRafdt.js",import.meta.url,"DAgRafdt");SML.di("./DZ6Nb6K0.js",import.meta.url,"DZ6Nb6K0");SML.di("./OAEZpqSu.js",import.meta.url,"OAEZpqSu");SML.di("./DDc9KuQK.js",import.meta.url,"DDc9KuQK");SML.di("./Dl4VGxuI.js",import.meta.url,"Dl4VGxuI");SML.di("./BgQQa1N4.js",import.meta.url,"BgQQa1N4");SML.di("./DRUYslaY.js",import.meta.url,"DRUYslaY");SML.di("./kmRFweAm.js",import.meta.url,"kmRFweAm");SML.di("./BcLK6-44.js",import.meta.url,"BcLK6-44");SML.di("./tTtakHR7.js",import.meta.url,"tTtakHR7");
SML.dm("D3d7c7xN",["DSWSCRFk","DAgRafdt","DZ6Nb6K0","OAEZpqSu","DDc9KuQK","Dl4VGxuI","kmRFweAm","BgQQa1N4","DRUYslaY","BcLK6-44","tTtakHR7"],(async(e,t,a,i,s,n,o)=>{let r=class extends e.s{constructor(){super(...arguments),this.id="",this.name="",this.slug="",this.iconUrl="",this.ctaLink="",this.subredditId=void 0,this.isSubscribedToSubreddit=!1,this.slotNumber=0,this.isRecentlyPlayed=!1,this.itemLabel="",this.isBadged=!1,this.onClick=()=>{t.a(this,this.buildEventData("click"))}}static get styles(){return[t.t]}buildEventData(e){return t.b({source:"nav",action:e,noun:"games_drawer_personalized_game"},{devplatform:{app_slug:this.slug,internal_entry_point:`games_drawer_slot_${this.slotNumber}`,app_recommendation_criteria:this.isRecentlyPlayed?"recently_played":"popular"}})}connectedCallback(){super.connectedCallback(),t.a(this,this.buildEventData("view"))}render(){const t=i.a1({size:"sm",appearance:"icon",children:this.iconUrl?e.x`<img loading="lazy" src="${this.iconUrl}" aria-hidden="true" alt="">`:e.x`<span style="color:inherit">${e.br({size:e.q.ExtraLarge})}</span>`}),a=o.a(this.ctaLink,"games_drawer_personalized_game");return s.l({href:a,label:e.x`<div class="flex flex-col min-w-0"> <div class="truncate">${this.name}</div> ${this.itemLabel?e.x`<div class="truncate text-12 text-coolgray-550">${this.itemLabel}</div>`:e.x``} </div>`,leadingAvatar:t,size:s.L.Small,onClick:()=>this.onClick(),trailingSlot:e.x`<div> ${this.isBadged?e.x`<rpl-badge appearance="${n.R.Alert}"></rpl-badge>`:e.x``} ${this.subredditId&&this.isRecentlyPlayed&&!this.isSubscribedToSubreddit?e.x`<shreddit-join-button name="${this.name}" subreddit-id="${this.subredditId}" buttonsize="x-small" button-classes="px-xs text-12" subscribe-label="${"Join"}" unsubscribe-label="${"Joined"}" unsubscribe-button-type-override="bordered" with-tracking tracking-source="nav" tracking-action="click" tracking-subscribe-noun="subscribe" tracking-unsubscribe-noun="unsubscribe" .trackingOptions="${{devplatform:{app_slug:this.slug,internal_entry_point:`games_drawer_slot_${this.slotNumber}`}}}" ?subscribed="${this.isSubscribedToSubreddit}"></shreddit-join-button>`:e.x``} </div>`});}};var d;e._([e.n({type:String})],r.prototype,"id",void 0),e._([e.n({type:String})],r.prototype,"name",void 0),e._([e.n({type:String})],r.prototype,"slug",void 0),e._([e.n({type:String})],r.prototype,"iconUrl",void 0),e._([e.n({type:String})],r.prototype,"ctaLink",void 0),e._([e.n({type:String})],r.prototype,"subredditId",void 0),e._([e.n({type:Boolean})],r.prototype,"isSubscribedToSubreddit",void 0),e._([e.n({type:Number})],r.prototype,"slotNumber",void 0),e._([e.n({type:Boolean})],r.prototype,"isRecentlyPlayed",void 0),e._([e.n({type:String})],r.prototype,"itemLabel",void 0),e._([e.n({type:Boolean})],r.prototype,"isBadged",void 0),r=e._([e.c("devvit-games-drawer-item")],r),function(e){e.Collapsed="0",e.Expanded="1"}(d||(d={})),Object.values(d);let l=class extends e.s{constructor(){super(...arguments),this.lastUpdated=0,this.country="",this.featuredGameSlug="",this.persistedCollapsePreferenceEnabled=!1,this._drawerState=null,this._onClick=()=>{const e=this._getCurrentExpandedState();a.s(this.featuredGameSlug)&&this._hideBadges(),this._drawerState!==e&&this._setGamesDrawerState(e)},this._getCurrentExpandedState=()=>void 0===this._sectionHelpers?.[0]?.open?d.Collapsed:this._sectionHelpers[0].open?d.Expanded:d.Collapsed,this._setGamesDrawerState=async e=>{var a,i;(this._drawerState=e,this.country&&void 0!==this._sectionHelpers?.[0]?.open)&&(t.a(this,t.b({source:"nav",action:"click",noun:e===d.Expanded?"games_drawer_open":"games_drawer_close"})),a=e,i=this.country,t.u({name:t.e_,value:a,country:i}),this.persistedCollapsePreferenceEnabled&&(this._saveCollapseStateOnServerWithDebounce(e),this.showSuccessToast(e)))},this.showSuccessToast=t.k((e=>{const a=t.c("faceplate-alert",{level:t.I.success,message:"Games section badges turned "+(e===d.Expanded?"on":"off")});this.dispatchEvent(a)}),250,{leading:!0,trailing:!0}),this._saveCollapseStateOnServer=e=>this._requestClientGQL({operation:t.O.UpdateDevvitPreferences,variables:{input:{isGamesDrawerCollapsed:e===d.Collapsed}}}),this._saveCollapseStateOnServerWithDebounce=t.k(this._saveCollapseStateOnServer,250),this._requestClientGQL=t.r,this._hideBadges=()=>{t.K.isAvailable()&&t.K.setItem(t.N.DevvitGamesSectionFeaturedGameSlug,this.featuredGameSlug);document.querySelectorAll("games-section-badge-wrapper").forEach((e=>e.isBadgeActive=!1))}}firstUpdated(){this._drawerState=this._getCurrentExpandedState()}render(){return e.x` <slot @click="${this._onClick}" @keydown="${this._onClick}"></slot>`}};e._([e.k({selector:"faceplate-expandable-section-helper",flatten:!0})],l.prototype,"_sectionHelpers",void 0),e._([e.n({attribute:"last-updated",type:Number})],l.prototype,"lastUpdated",void 0),e._([e.n({attribute:"country",type:String})],l.prototype,"country",void 0),e._([e.n({attribute:"featured-game-slug",type:String})],l.prototype,"featuredGameSlug",void 0),e._([e.n({attribute:"persisted-collapse-preference-enabled",type:Boolean})],l.prototype,"persistedCollapsePreferenceEnabled",void 0),l=e._([e.c("games-section-badge-controller")],l)}));